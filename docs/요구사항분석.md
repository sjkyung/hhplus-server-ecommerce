

 #  요구사항 분석
 
 ##  1. 기능적 요구사항
 
 사용자에게 제공되어야 하는 **핵심 기능들**을 정리합니다.
 
 ###  잔액 충전 / 조회 API
 - 사용자는 금액을 충전할 수 있다.
   - 입력: 사용자 식별자, 충전할 금액(최대 충전 금액 100만)
 - 사용자의 잔액을 조회할 수 있다.
   - 입력: 사용자 식별자
   - 출력: 현재 보유 잔액
 
 ### 상품 조회 API
 - 사용자는 상품 목록을 조회할 수 있다.
   - 상품 정보: 상품 ID, 이름, 가격, 잔여 수량
 - 조회 시점의 수량은 최신 정보여야 한다.
 
 ### 선착순 쿠폰 API
 - 사용자는 선착순으로 쿠폰을 발급받을 수 있다.
     - 조건: 쿠폰은 수량 제한 및 만료일이 설정되어 있으며, 중복 발급 불가
 - 발급된 쿠폰은 보유 쿠폰 목록에서 조회 가능하다.
 - 주문 시 유효한 쿠폰을 함께 제출하면 해당 주문 금액에서 할인 적용된다.
 - 쿠폰은 결제 완료 시 최종 사용 처리되며, 결제 실패 또는 주문 취소 시 자동으로 복구된다.
 
 ### 주문 / 결제 API
 - 사용자는 상품 ID 및 수량 목록을 담아 주문할 수 있다.
 - 주문은 잔액(- 는 금액 사용 x),상품 재고(- 는 사용 x),쿠폰 만료 여부 검증해야한다. 
 - 결제는 미리 충전된 잔액으로 처리된다.
 - 결제 성공 시:
   - 잔액 차감
   - 상품 재고 차감
   - 쿠폰 사용 처리
   - 주문 정보는 외부 데이터 플랫폼으로 전송됨
 
 ### 인기 상품 조회 API
 - 최근 3일간 가장 많이 팔린 상위 5개 상품을 조회할 수 있다.
 - 조회 시점 기준으로 과거 3일 동안의 판매 데이터를 집계하여 상위 5개를 선정한다.
 
 ---
 
 ##  2. 비기능적 요구사항
 
 ###  성능 및 정확성
 - 상품 재고는 정확하게 반영되어야 함
 - 잔액 처리와 재고 감소는 동시성 이슈 없이 일관되게 처리되어야 함
 
 ###  동시성 & 무결성
 - 다수 사용자가 동시에 주문을 요청할 경우에도:
   - 포인트 충전/차감 정확성 보장
   - 상품 재고는 초과 주문이 불가하도록 처리
   - 쿠폰은 중복 사용 또는 초과 발급 방지

    
 ---
 
 ##  추가 고려사항
 
 - **재고 감소와 포인트 차감, 쿠폰 사용은 원자적으로 처리되어야 함**  
   (트랜잭션 or 보상 트랜잭션)
 - **만료된 주문,쿠폰은 정리할 수 있는 스케줄러 또는 정책이 필요**
 
 ---
 
 ##  정리 포인트
 요구사항에서 기능적 요구사항 / 비기능적 요구사항의 차이를 항상 생각하면서 설계할 것!!
 
 | 요구사항 구분         | 주요 내용 요약                                                      |
 |----------------------|-------------------------------------------------------------------|
 | 기능적 요구사항       | 잔액 충전/조회, 상품 조회, 쿠폰 발급/사용, 주문/결제, 인기상품 조회   |
 | 비기능적 요구사항     | 정확한 재고/잔액 처리, 동시성 제어|